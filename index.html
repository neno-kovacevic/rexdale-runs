<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rexdale Runs</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.datatables.net/v/bs5/dt-1.13.8/datatables.min.css"
      rel="stylesheet"
    />

    <script type="text/javascript" src="./players/data.json"></script>
    <script type="text/javascript" src="index.js"></script>
    <script>
      //Grab all the athlete rows by the class we added to the <tr>'s'
      let athleteRows = document.getElementsByClassName("player-data");
      //Listen for button click

      function calculateWinPercentage() {
        //Iterate over the athlete rows
        for (let row of athleteRows) {
          //Get their time
          let wins = parseFloat(row.getElementsByTagName("td")[1].textContent);
          let losses = parseFloat(
            row.getElementsByTagName("td")[2].textContent
          );
          let winPercentage = ((100 * wins) / (wins + losses)).toFixed(1);

          row.getElementsByClassName("win-percentage")[0].textContent =
            winPercentage;
          //Compare them, and set the text content.
        }
      }

      function loadDataTable() {
        new DataTable("#example", {
          order: [[4, "desc"]],
          columns: [
            { orderData: 0 },
            { orderData: 1 },
            { orderData: 2 },
            null,
            { orderData: [4, 1] },
          ],
          buttons: true,
          paging: false,
          autoWidth: true,
          searching: false,
          bInfo: false,
        });
      }

      // Builds the HTML Table out of myList.
      // function buildHtmlTable(selector) {
      //   var columns = addAllColumnHeaders(myList, selector);

      //   for (var i = 0; i < myList.length; i++) {
      //     var row$ = $("<tr/>");
      //     for (var colIndex = 0; colIndex < columns.length; colIndex++) {
      //       var cellValue = myList[i][columns[colIndex]];
      //       if (cellValue == null) cellValue = "";
      //       row$.append($("<td/>").html(cellValue));
      //     }
      //     $(selector).append(row$);
      //   }
      // }

      // Adds a header row to the table and returns the set of columns.
      // Need to do union of keys from all records as some records may not contain
      // all records.
      // function addAllColumnHeaders(myList, selector) {
      //   var columnSet = [];
      //   var headerTr$ = $("<tr/>");

      //   for (var i = 0; i < myList.length; i++) {
      //     var rowHash = myList[i];
      //     for (var key in rowHash) {
      //       if ($.inArray(key, columnSet) == -1) {
      //         columnSet.push(key);
      //         headerTr$.append($("<th/>").html(key));
      //       }
      //     }
      //   }
      //   $(selector).append(headerTr$);

      //   return columnSet;
      // }

      window.addEventListener("load", function () {
        // loadData();
        calculateWinPercentage();
        loadDataTable();
      });
    </script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <!-- <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script> -->
    <script src="https://cdn.datatables.net/v/bs5/dt-1.13.8/datatables.min.js"></script>
  </head>
  <body>
    <div class="container pb-3">
      <!--<button id="btn-test" onclick="calculateWinPercentage()">Click</button>-->
      <h1>Rexdale Runs</h1>
      <p>April 28, 2024</p>
      <table
        id="example"
        class="display compact table table-sm table-bordered table-hover mt-3"
        style="width: 80%"
      >
        <thead>
          <tr class="table-primary">
            <th class="text-center">Player</th>
            <th class="text-center">Wins</th>
            <th class="text-center">Losses</th>
            <th class="text-center">Record</th>
            <th class="text-center">Win %</th>
          </tr>
        </thead>
        <tbody>
          <tr class="player-data table-success">
            <td><a href="./players/lucas.html">Lucas</a></td>
            <td>8</td>
            <td>3</td>
            <td>8-3</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/maraldo.html">Christian M.</a></td>
            <td>8</td>
            <td>4</td>
            <td>8-4</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/raheem.html">Raheem</a></td>
            <td>2</td>
            <td>2</td>
            <td>2-2</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/aziah.html">Aziah</a></td>
            <td>6</td>
            <td>8</td>
            <td>6-8</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/galati.html">Rob G.</a></td>
            <td>1</td>
            <td>2</td>
            <td>1-2</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-success">
            <td><a href="./players/toniz.html">Toni</a></td>
            <td>13</td>
            <td>7</td>
            <td>13-7</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/armin.html">Armin</a></td>
            <td>6</td>
            <td>11</td>
            <td>6-10</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-success">
            <td><a href="./players/neno.html">Neno</a></td>
            <td>6</td>
            <td>10</td>
            <td>6-10</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/zadro.html">Zadro</a></td>
            <td>5</td>
            <td>5</td>
            <td>5-5</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-success">
            <td><a href="./players/viktor.html">Viktor</a></td>
            <td>4</td>
            <td>12</td>
            <td>4-12</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-success">
            <td><a href="./players/nikonever.html">Niko N.</a></td>
            <td>7</td>
            <td>9</td>
            <td>7-9</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-success">
            <td><a href="./players/ivan.html">Ivan</a></td>
            <td>4</td>
            <td>11</td>
            <td>4-11</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/maxnever.html">Max</a></td>
            <td>7</td>
            <td>10</td>
            <td>7-10</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-success">
            <td><a href="./players/prav.html">Prav</a></td>
            <td>7</td>
            <td>7</td>
            <td>7-7</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/jason.html">Jason</a></td>
            <td>4</td>
            <td>3</td>
            <td>4-3</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/yunus.html">Yunus</a></td>
            <td>1</td>
            <td>1</td>
            <td>1-1</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/milos.html">Milos</a></td>
            <td>3</td>
            <td>5</td>
            <td>3-5</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/nidzo.html">Nidzo</a></td>
            <td>8</td>
            <td>5</td>
            <td>8-5</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/kemo.html">Kemo</a></td>
            <td>2</td>
            <td>1</td>
            <td>2-1</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/sandro.html">Sandro</a></td>
            <td>0</td>
            <td>1</td>
            <td>0-1</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data table-danger">
            <td><a href="./players/misel.html">Misel</a></td>
            <td>1</td>
            <td>3</td>
            <td>1-3</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/sven.html">Sven</a></td>
            <td>0</td>
            <td>1</td>
            <td>0-1</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/erik.html">Erik</a></td>
            <td>2</td>
            <td>4</td>
            <td>2-4</td>
            <td class="win-percentage">.</td>
          </tr>
          <tr class="player-data">
            <td><a href="./players/kiki.html">Kiki</a></td>
            <td>0</td>
            <td>2</td>
            <td>0-2</td>
            <td class="win-percentage">.</td>
          </tr>
        </tbody>
      </table>

      <h1 class="mt-3">Costa Rica Runs</h1>

      <table
        id="costa-rica"
        class="display compact table table-sm table-bordered table-hover mt-3"
        style="width: 80%"
      >
        <thead>
          <tr class="table-primary">
            <th class="text-center">Player</th>
            <th class="text-center">Wins</th>
            <th class="text-center">Losses</th>
            <th class="text-center">Record</th>
            <th class="text-center">Win %</th>
          </tr>
        </thead>
        <tbody>
          <tr class="player-data">
            <td><a href="./players/lucas.html">Jacob</a></td>
            <td>3</td>
            <td>0</td>
            <td>3-0</td>
            <td class="win-percentage">.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
